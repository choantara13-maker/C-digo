{% extends 'tienda/base_store.html' %}
{% load static %}
{% block title %}Checkout - Sweet Blessing{% endblock %}
{% block content %}
  <h2 class="mb-3">Checkout</h2>
  <p>Solo usuarios con sesión iniciada pueden comprar (¡ya estás logeada/o!).</p>
  <div class="card p-3 shadow-sm">
    <h5>Resumen</h5>
    <ul class="list-group mb-3">
      {% for pid, item in carrito.items %}
        <li class="list-group-item d-flex justify-content-between">
          <span>{{ item.nombre }} x {{ item.cantidad }}</span>
          <span>${{ item.precio|floatformat:0 }}</span>
        </li>
      {% endfor %}
    </ul>
    <div class="d-flex justify-content-between">
      <strong>Total</strong>
      <strong>${{ total|floatformat:0 }}</strong>
    </div>
    <hr>
    <form action="{% url 'tienda:webpay_iniciar' %}" method="POST"> 
      {% csrf_token %}
        <button type="submit" class="btn btn-success mt-2 w-100 py-2 fs-5">
            Pagar con Webpay <i class="bi bi-credit-card-2-front-fill ms-2"></i>
        </button>
    </form>
  </div>
{% endblock %}
